# 四元数

四元数包含一个实部和三个虚部
$$
q = s + xi + yj + zk
$$

$s,x,y,z$均为实数，$i,j,k$的关系为：
$$
\left\{
\begin{aligned}
    i^2 = j^2 = k^2 = ijk = -1  \\
    ij = k, jk=i, ki = j\\
    ji = -k, kj = -i, ik = -j
\end{aligned}
\right.
$$

四元数改写为标量和向量的有序对形式：
$$
q = [s, v], v = [x, y, z]
$$
$s$为四元数的实部，$v$为虚部，当$s=0$或$v=0$时，称$q$为实四元数或虚四元数(与复数类似)。

设两个四元数$q_1,q_2$，其中$q_1=[s_1,v_1],q_2=[s_2,v_2]$

四元数的加减法：
$$
q_1 + q_2 = [s_1+s_2,v_1+v_2]   \\
q_1 - q_2 = [s_1-s_2,v_1-v_2]
$$
乘法：(设$v_1=[x_1i,y_1j,z_1k],v_2=[x_2i,y_2j,z_2k]$)
$$
\begin{aligned}
q_1 q_2 =& (s_1 + x_1i +y_1j + z_1k)(s_2 + x_2i +y_2j + z_2k)
\\    =&(s_1s_2 - x_1x_2 - y_1y_2 - z_1z_2)
\\      &+(s_1x_2 + s_2x_1 + y_1z_2 -y_2z_1)i
\\      &+(s_1y_2 + s_2y_1 + z_1x_2 - z_2x_1)j
\\      &+(s_1z_2 + s_2z_1 + x_1y_2 - x_2y_1)k
\\    =&[s_1s_2-v_1\cdot v_2,s_1v_2 + s_2v_1 + v_1 \times v_2]
\end{aligned}
$$

共轭：(实部不变，虚部取反)
$$
q^{*}=[s,-v]=s- xi -yj -zk
$$

四元数的模：
$$
|| q ||=\sqrt{s^2+x^2+y^2+z^2}
$$


求逆：
$$
q^{-1}=\frac{q^{*}}{||q||}
$$

